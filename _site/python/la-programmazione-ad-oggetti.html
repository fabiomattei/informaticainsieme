<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>La programmazione ad oggetti | Informatica insieme</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="La programmazione ad oggetti" />
<meta name="author" content="fabio" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Introduzione" />
<meta property="og:description" content="Introduzione" />
<link rel="canonical" href="http://localhost:4000/informaticainsieme/python/la-programmazione-ad-oggetti" />
<meta property="og:url" content="http://localhost:4000/informaticainsieme/python/la-programmazione-ad-oggetti" />
<meta property="og:site_name" content="Informatica insieme" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-02-09T07:36:40+01:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="La programmazione ad oggetti" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"fabio"},"dateModified":"2020-02-09T07:36:40+01:00","datePublished":"2020-02-09T07:36:40+01:00","description":"Introduzione","headline":"La programmazione ad oggetti","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/informaticainsieme/python/la-programmazione-ad-oggetti"},"url":"http://localhost:4000/informaticainsieme/python/la-programmazione-ad-oggetti"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/informaticainsieme/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/informaticainsieme/feed.xml" title="Informatica insieme" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/informaticainsieme/">Informatica insieme</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/informaticainsieme/about/">About me</a><a class="page-link" href="/informaticainsieme/paginemenu/codifica.html">La codifica dell&#39;informazione</a><a class="page-link" href="/informaticainsieme/paginemenu/python.html">Python</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">La programmazione ad oggetti</h1>
  </header>

  <div class="post-content">
    <h4 id="introduzione">Introduzione</h4>

<p>Nella programmazione procedurale distinguiamo tra dati, e funzioni. I primi costituiscono l’insieme delle informazioni su cui operiamo, le seconde costituiscono l’insieme degli algoritmi che operano sui dati. Nella programmazione tradizionale queste sono due entità distinte.</p>

<p>Il kernel linux è custotuito da oltre 25 milioni di righe di codice scritte da 19000 programmatori, il progetto Libreoffice è custotuito da circa 10 milioni di righe di codice scritte da pidi 1800 programmatori.</p>

<p>Quando il codice diventa molto ampio si aprono problematiche come:</p>

<ul>
  <li>collisioni di nomi: funzioni o variabili che vengono definite in sezioni diverse di programma, da persone diverse, con lo stesso nome. Quando il computer si trova di fronte a queste non sa cosa fare;</li>
  <li>side effects: una variabile viene utilizzata da un programmatore in un modo e da un altro programmatore in un altro, questo crea comportamenti inaspettati da parte del software.</li>
</ul>

<p>Nella programmazione ad oggetti si cerca di ovviare a queste problematiche creando dei pacchetti di informazioni e di funzioni che operano su queste. I primi si chiamano attributi, i secondi si chiamano metodi.</p>

<h4 id="sintassi">Sintassi</h4>

<p>La classe più semplice che possiamo definire in Python è:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Test</span><span class="p">:</span>
    <span class="k">pass</span></code></pre></figure>

<p>&lt;/div&gt;Come possiamo vedere dall’esempio, per definire una classe basta usare la parola chiave class, seguita dal nome che vogliamo dare alla classe (in questo caso Test), seguita dai due punti (:), seguita infine da un blocco di codice indentato (in questo caso c’è solo il pass) che è il codice appartenente alla classe stessa.</p>

<p>Proviamo ora a definire una classe Cerchio.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Cerchio</span><span class="p">:</span> 

    <span class="n">pigreco</span> <span class="o">=</span> <span class="mf">3.14</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">raggio</span><span class="p">):</span>
        <span class="s">""" Inizializza la classe 
        parametro raggio int o float
        """</span> 
        <span class="bp">self</span><span class="p">.</span><span class="n">raggio</span> <span class="o">=</span> <span class="n">raggio</span>
        
    <span class="k">def</span> <span class="nf">calcola_area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">""" Calcola l'area del cerchio 
        return float
        """</span> 
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">raggio</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="p">.</span><span class="n">pigreco</span>
        
    <span class="k">def</span> <span class="nf">calcola_circonferenza</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">""" Calcola la circonferenza del cerchio 
        return float
        """</span> 
        <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="p">.</span><span class="n">pigreco</span> <span class="o">*</span> <span class="bp">self</span><span class="p">.</span><span class="n">raggio</span></code></pre></figure>

<p>&lt;/div&gt;La classe Cerchio ha un <strong>attributo di classe</strong> chiamato <em>pigreco</em>. È un attributo di classe perchè ha lo stesso valore per tutte le istanze della classe.</p>

<p>Questo vuol dire che posso definire molti cerchi, ognuno con un raggio diverso da quello degli altri, ma per tutti il valore di π sarà sempre lo stesso.</p>

<p>La classe ha anche un attributo di istanza chiamato raggio. Questi sarà impostato di volta in volta in modo differente per ciascun cerchio appartenente alla classe.</p>

<p>La classe Cerchio ha due metodi: calcola_raggio e calcola_circonferenza. Questi si occupano di operare sulle informazioni contenute nella classe per implementare gli algoritmi necessari.</p>

<p>Nota che mentre gli attributi di classe sono targhette per identificare le informazioni e dunque sono descritti da sostantivi, i metodi sono targhette per identificare algoritmi e sono dunque descritti da verbi.</p>

<h4 id="classi">Classi</h4>

<p>La classe è un costrutto che ci permette di definire la base per creare oggetti. All’interno di una classe si definisce la strutture delle informazioni su cui questa lavorerà e gli algoritmi che opereranno sulle informazioni stesse. <strong>Le classi sono costrutti astratti non si riferiscono a nessun oggetto specifico</strong>. Ad esempio posso definire la classe <em>Alunno</em> che al suo interno conterrà le stringhe nome e cognome senza entrare nella specificità dell’alunno che si chiama Mario Rossi.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Alunno</span><span class="p">:</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nome</span><span class="p">,</span> <span class="n">cognome</span><span class="p">):</span>
    <span class="s">""" Costruttore
    parametro nome string parametro cognome string 
    """</span> 
    <span class="bp">self</span><span class="p">.</span><span class="n">nome</span> <span class="o">=</span> <span class="n">nome</span> 
    <span class="bp">self</span><span class="p">.</span><span class="n">cognome</span> <span class="o">=</span> <span class="n">cognome</span>
    
    <span class="k">def</span> <span class="nf">saluta</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="s">""" Scrive una stringa di saluto
    return string 
    """</span>
    <span class="k">return</span> <span class="s">"Ciao, mi chiamo "</span> <span class="o">+</span> <span class="bp">self</span><span class="p">.</span><span class="n">nome</span> <span class="o">+</span> <span class="s">" "</span> <span class="o">+</span> <span class="bp">self</span><span class="p">.</span><span class="n">cognome</span></code></pre></figure>

<p>&lt;/div&gt;#### Istanze</p>

<p>Le istanze sono oggetti creati a partire da una classe. Sono le materializzazione della classe stessa. Al fine di creare una istanza si utilizza il nome con cui è stata definita la classe e tra parentesi si forniscono gli argomenti esplicitati in via di definizione del costruttore __init__.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">mario</span> <span class="o">=</span> <span class="n">Alunno</span><span class="p">(</span><span class="s">"Mario"</span><span class="p">,</span> <span class="s">"Rossi"</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="n">mario</span><span class="p">.</span><span class="n">saluta</span><span class="p">())</span>
<span class="n">rita</span> <span class="o">=</span> <span class="n">Alunno</span><span class="p">(</span><span class="s">"Rita"</span><span class="p">,</span> <span class="s">"Morelli"</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="n">rita</span><span class="p">.</span><span class="n">saluta</span><span class="p">())</span>
<span class="n">cerchio5</span> <span class="o">=</span> <span class="n">Cerchio</span><span class="p">(</span><span class="mf">5.5</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="n">cerchio5</span><span class="p">.</span><span class="n">calcola_circonferenza</span><span class="p">())</span></code></pre></figure>

<p>&lt;/div&gt;#### Attributi</p>

<p>Le informazioni contenute in una classe vengono memorizzate attraverso gli attributi. Ad esempio la classe Alunno contiene gli attributi nome e cognome. Questi sono accessibili liberamente dai metodi della classe ma è buona abitudine renderli inaccessibili dall’esterno, questo perchè un accesso diretto da parte del consumer sugli attributi va venire meno il principio di incapsulamento. Esistono due tipi di attributi:</p>

<ul>
  <li>attributi di classe</li>
  <li>attributi di istanza</li>
</ul>

<p>Gli attributi di istanza sono informazioni che sono definite istanza per istanza, ad esempio il nome e il cognome della classe Alunno i secondi sono informazioni comuni a tutte le istanze, per esempio il valore di π per la classe Cerchio. È bene che ciascun attributo sia descritto da un sostativo.</p>

<p>Gli attributi di classe sono valori legati alla classe, che sono comuni e accessibili da tutte le istanze. Per dichiarare attributi di classe, esistono due modi: usando classe.attributo = valore o usando attributo = valore nel corpo della dichiarazione di una classe.</p>

<h4 id="metodi">Metodi</h4>

<p>I metodi sono gli algoritmi che operano con le informazioni contenute negli attributi. Dato che i metodi sono sostanzialmente nomi di algoritmi che “fanno cose” è bene che questi siano dei verbi. Per ragioni implementative ciascun metodo definito contiene il parametro fittizio self. Questo parametro va sempre esplicitato per ciascun metodo, ma va ignorato quando il metodo viene chiamato.</p>

<ul>
  <li>le definizioni dei metodi si trovano indentate all’interno della classe;</li>
  <li>la sintassi usata per definire i metodi è uguale a quella usata per definire le funzioni;</li>
  <li>i metodi devono definire un parametro aggiuntivo che per convenzione è chiamato self;</li>
  <li>per chiamare un metodo basta usare la sintassi istanza.metodo().</li>
</ul>

<h4 id="la-parola-chiave-self">la parola chiave self</h4>

<p>Come si nota nell’esempio precedente, la differenza più importante tra la definizione di metodi e funzioni, è la presenza del self. self è un argomento che si riferisce all’istanza, e anche se i metodi devono dichiararlo esplicitamente, non è necessario passarlo esplicitamente.</p>

<p>Dato che self si riferisce all’istanza, possiamo usarlo per accedere ad altri attributi e metodi definiti all’interno dello classe semplicemente facendo self.attribute o self.metodo(). Inizializzare istanze Le classi supportano anche diversi metodi “speciali” che sono identificati dalla presenza di due <em>underscore</em> prima e dopo del nome. Questi metodi non vengono chiamati diretta- mente facendo inst.__metodo__, ma vengono in genere chiamati automaticamente in situazioni particolari Uno di questi metodi speciali è __init__, chiamato automaticamente ogni volta che un’istanza viene creata.</p>

<h4 id="incapsulamento">Incapsulamento</h4>

<p>Progettare un software attraverso l’approccio Object oriented consiste nel trovare informazioni logicamente correlate e inserirle all’interno di una classe. Queste informazioni lavoreranno a stretto contatto le une con le altre attraverso gli algoritmi (metodi) che fanno parte della classe stessa.</p>

<p>Quando si parla di incapsulamento si intendono due aspetti della progettazione del software:</p>

<ul>
  <li>mettere insieme informazioni e metodi logicamente connessi in una classe;</li>
  <li>nascondere i dettagli implementativi al di fuori della classe stessa.</li>
</ul>

<h4 id="ereditarietà">Ereditarietà</h4>

<p>La particolarità della programmazione ad oggetti consiste nel creare gerarchie di classi che condividono metodi ed attributi al fine di permettere al programmatore di definire di volta in volta non l’intero ammontare di informazioni e algoritmi ma soltanto ciò che varia.</p>

<p>Ad esempio potrei generalizzare la classe Alunno definita in precedenza nella sua classe padre Persona.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Persona</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nome</span><span class="p">,</span> <span class="n">cognome</span><span class="p">):</span>
        <span class="s">""" Costruttore 
        parametro nome string 
        parametro cognome string 
        """</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">nome</span> <span class="o">=</span> <span class="n">nome</span> 
        <span class="bp">self</span><span class="p">.</span><span class="n">cognome</span> <span class="o">=</span> <span class="n">cognome</span>
        
    <span class="k">def</span> <span class="nf">saluta</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">""" Scrive una stringa di saluto 
        return string
        """</span>
    <span class="k">return</span> <span class="s">"Ciao, mi chiamo "</span> <span class="o">+</span> <span class="bp">self</span><span class="p">.</span><span class="n">nome</span> <span class="o">+</span> <span class="s">" "</span> <span class="o">+</span> <span class="bp">self</span><span class="p">.</span><span class="n">cognome</span></code></pre></figure>

<p>&lt;/div&gt;A questo punto definisco la classe Studente in maniera più semplice, ereditando i metodi __init__ e saluta dalla classe padre. Per lo studente definisco il solo metodo lavora.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Studente</span><span class="p">(</span><span class="n">Persona</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">lavora</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"Sto studiando"</span><span class="p">)</span>
        
<span class="k">class</span> <span class="nc">Professore</span><span class="p">(</span><span class="n">Persona</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">lavora</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"Sto spiegando"</span><span class="p">)</span>
    </code></pre></figure>

<p>&lt;/div&gt;#### Polimorfismo</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">scuola</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">scuola</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">Alunno</span><span class="p">(</span><span class="s">"Mario"</span><span class="p">,</span> <span class="s">"Rossi"</span><span class="p">))</span> 
<span class="n">scuola</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">Alunno</span><span class="p">(</span><span class="s">"Rita"</span><span class="p">,</span> <span class="s">"Morelli"</span><span class="p">))</span> 
<span class="n">scuola</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">Professore</span><span class="p">(</span><span class="s">"Antonino"</span><span class="p">,</span> <span class="s">"Anile"</span><span class="p">))</span>
<span class="k">for</span> <span class="n">persona</span> <span class="ow">in</span> <span class="n">scuola</span><span class="p">:</span> 
    <span class="n">persona</span><span class="p">.</span><span class="n">lavora</span><span class="p">()</span></code></pre></figure>

<p>&lt;/div&gt;Il polimorfismo entra in atto quando ho oggetti di tipo differente (che appartengono a classi diverse) che hanno la stessa interfaccia. Le istanze di una sottoclasse possono essere utilizzate al posto delle istanze della superclasse. L’overriding dei metodi o delle proprietà permette che gli oggetti appartenenti alle sottoclassi di una stessa classe rispondano diversamente agli stessi utilizzi.</p>

<p>Per esempio nell’esempio in alto abbiamo tre oggetti, i primi due appartenenti alla classe Alunno e il terzo appartenente alla classe Professore. Dato che tutti questi oggetti definiscono il metodo lavora è possibile scrivere un costrutto come quello contenuto nel ciclo for.</p>

<h4 id="composizione">Composizione</h4>

<p>Negli esempi che abbiamo visto finora gli attributi<br />
delle classi erano variabili di tipo primitivo è però possibile definire come attributi dei riferimenti ad oggetti di un’altra classe.<br />
In questo modo abbiamo oggetti composti da altri<br />
oggetti.</p>

<p>Creiamo una classe scuola che contenga al suo interno una lista di studenti, una lista di professori, una lista di persone che compongono il personale ATA ed un preside.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Scuola</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">preside</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">alunni</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">professori</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">personale_ata</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="k">def</span> <span class="nf">aggiungi_studente</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">studente</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">studenti</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">studente</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">definisci_preside</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">preside</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">preside</span> <span class="o">=</span> <span class="n">preside</span>
        
    <span class="k">def</span> <span class="nf">aggiungi_professore</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">professore</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">professori</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">professore</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">aggiungi_ata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ata</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">professori</span><span class="p">.</span><span class="n">personale_ata</span><span class="p">(</span><span class="n">ata</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">conta_studenti</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">studenti</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">conta_professori</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">professori</span><span class="p">)</span>
        </code></pre></figure>

<p>&lt;/div&gt;La classe appena definita contiene anche alcuni metodi che lavorano sugli oggetti contenuti. I metodi <em>conta_studenti</em> e <em>conta_professori</em> reestituiscono il numero di studenti e di professori che sono contenuti nelle rispettive liste.</p>

<p>A questo punto è possibile utilizzare la classe appena definita come segue:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">patiniliberatore</span> <span class="o">=</span> <span class="n">Scuola</span><span class="p">()</span>         
        
<span class="n">patiniliberatore</span><span class="p">.</span><span class="n">aggiungi_studente</span><span class="p">(</span><span class="n">Alunno</span><span class="p">(</span><span class="s">"Mario"</span><span class="p">,</span> <span class="s">"Rossi"</span><span class="p">))</span> 
<span class="n">patiniliberatore</span><span class="p">.</span><span class="n">aggiungi_studente</span><span class="p">(</span><span class="n">Alunno</span><span class="p">(</span><span class="s">"Rita"</span><span class="p">,</span> <span class="s">"Morelli"</span><span class="p">))</span> 
<span class="n">patiniliberatore</span><span class="p">.</span><span class="n">aggiungi_professore</span><span class="p">(</span><span class="n">Professore</span><span class="p">(</span><span class="s">"Antonino"</span><span class="p">,</span> <span class="s">"Anile"</span><span class="p">))</span>

<span class="k">print</span><span class="p">(</span><span class="s">"Nel Patini studiano"</span><span class="p">,</span> <span class="n">patiniliberatore</span><span class="p">.</span><span class="n">conta_studenti</span><span class="p">(),</span> <span class="s">"studenti"</span><span class="p">)</span></code></pre></figure>

<p>&lt;/div&gt;Notiamo che alla riga 1 creiamo una nuova istanza della classe scuola. Dalla riga 3 alla 5 popoliamo la scuola con due studenti ed un professore. In fine alla riga 7 utilizziamo il metodo <em>conta_studenti</em> per contare il numero di studenti nella scuola.</p>

<h4 id="inizia-scrivendo-un-test">Inizia scrivendo un test</h4>

<p>Supponiamo di voler scrivere una classe che si occupi di trasformare i gradi Celsius in gradi Fahrenheit. Noi tutti sappiamo che: <em>Tf = Tc * 9 / 5 + 32</em></p>

<p>Dato che dobbiamo sviluppare questa importante funzione matematica diventa tedioso iniziare a scrivere il codice e poi inserire l’input per controllare che la funzione si comporti come atteso. Ci serviamo dunque dell’istruzione <strong>assert</strong>.</p>

<p>Assert accetta due argomenti: il primo è una proposizione booleana che può essere vera o falsa (True o False) e nel caso questa non lo sia stampa il messaggio che segue la virgola.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Conversioni</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">trasfCelsInFahr</span><span class="p">(</span><span class="n">Temp</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Temp</span><span class="o">*</span><span class="mi">9</span><span class="o">/</span><span class="mi">5</span><span class="o">+</span><span class="mi">32</span>
    <span class="k">def</span> <span class="nf">trasfFahrInCels</span><span class="p">(</span><span class="n">Temp</span><span class="p">):</span>
        <span class="k">pass</span>
    
<span class="c1"># se lo script viene mandato in # esecuzione quanto contenuto in # questo if viene eseguito
</span><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">conv</span> <span class="o">=</span> <span class="n">Conversioni</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">conv</span><span class="p">.</span><span class="n">trasfCelsInFahr</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mf">32.0</span><span class="p">,</span> <span class="s">"Err. per 0"</span> 
    <span class="k">assert</span> <span class="n">conv</span><span class="p">.</span><span class="n">trasfCelsInFahr</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="o">==</span> <span class="mf">68.0</span><span class="p">,</span> <span class="s">"Err. per 20"</span> 
    <span class="k">assert</span> <span class="n">conv</span><span class="p">.</span><span class="n">trasfCelsInFahr</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="o">==</span> <span class="mf">86.0</span><span class="p">,</span> <span class="s">"Err. per 30"</span> 
    <span class="k">print</span><span class="p">(</span><span class="s">"Tutto ok!"</span><span class="p">)</span></code></pre></figure>

<p>&lt;/div&gt;Quando vado a lanciare il file questo manderà in esecuzione tutti i test e nel caso uno di questi non funzioni, cioè se la mia implementazione non è</p>

<p>corretta, visualizzerà un messaggio di errore. Questo espediente mi consente di correggere l’implementazione della classe e dei suoi metodi dato che è molto rapido eseguire i test per vedere se tutto funziona come atteso.</p>

<p>Un test rappresenta anche una forma di contratto tra programmatori. Quando due programmatori collaborano su di una applicazione possono accordarsi sulla firma delle classi e dei loro metodi e su alcuni esempi che scrivono sotto forma di test. In questo modo sarà chiaro per entrambi quando il codice è ben implementata.</p>

<p>Ultimo vantaggio: un test mi permette di fare refactoring del codice. Questo significa che posso lavorare sull’implementazione della classe per migliorarla dal punto di visto delle prestazioni per esempio, essendo sicuro di non introdurre bugs nel codice dato che di volta in volta che faccio modifiche controllerò che tutti i test diano esito positivo.</p>

<h4 id="scrivere-la-documentazione-per-ciascuna-classe">Scrivere la documentazione per ciascuna classe</h4>

<p>È molto importante lasciare traccia su quanto viene implementato. Ciò che appare scontato durante il processo di scrittura potrebbe non esserlo più quando si va a rileggere quel codice un anno più tardi. Bisogna poi imparare ad essere buoni cittadini del mondo digitale e pensare che altri potrebbero utilizzare le funzioni che scriviamo e dunque è buona norma descriverne in maniera puntuale il funzionamento.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Conversioni</span><span class="p">:</span>
    <span class="s">""" Questa classe implementa alcune trasformazioni 
    tra diverse scale di temperatura 
    """</span>
    
    <span class="k">def</span> <span class="nf">trasfCelsInFahr</span><span class="p">(</span><span class="n">temp</span><span class="p">):</span>
        <span class="s">""" Questo metodo trasforma la temperatura 
        data in gradi Celsius
        in temperatura in gradi Fahrenheit
        temp: float
        return: float 
        """</span>
        <span class="k">return</span> <span class="n">temp</span><span class="o">*</span><span class="mi">9</span><span class="o">/</span><span class="mi">5</span><span class="o">+</span><span class="mi">32</span>
        
    <span class="k">def</span> <span class="nf">trasfFahrInCels</span><span class="p">(</span><span class="n">Temp</span><span class="p">):</span>
        <span class="k">pass</span>
    </code></pre></figure>

<p>&lt;/div&gt;#### Organizza il tuo codice in moduli</p>

<p>Quando si scrive il codice è bene scriverlo in modo che questo sia facile da tenere sotto controllo con i test e che questo sia riutilizzabile in una o più applicazioni. Per questo è importante organizzare il codice in moduli. Immaginiamo di lavorare su di un progetto di fisica. Saggiamente decidiamo di creare una cartella che conterrà tutti i file del nostro progetto e, senza sforzare troppo la nostra fantasia la chiameremo progettodifisica.</p>

<ul>
  <li>progettodifisica/</li>
  <li>progettodifisica/principale.py</li>
  <li>progettodifisica/grandezze/conversioni.py</li>
</ul>

<p>La cartella progettodifisica contiene un file principale.py il quale contiene la sezione principale del codice, quello cioè che mando in esecuzione quando ho necessità di utilizzare il software.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="c1"># file: principale.py
</span>
<span class="c1"># importa il modulo conversioni.py
</span><span class="kn">from</span> <span class="nn">grandezze.conversioni</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s">'Temp Celsius: '</span><span class="p">))</span> 
    <span class="n">conv</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Conversioni</span><span class="p">()</span>
    <span class="n">fahr</span> <span class="o">=</span> <span class="n">conv</span><span class="p">.</span><span class="n">trasfCelsInFahr</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span> 
    <span class="k">print</span><span class="p">(</span><span class="s">'Temp. Fahrenheit = '</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">fahr</span><span class="p">))</span>
    <span class="c1"># se lo script viene mandato in 
</span>    <span class="c1"># esecuzione quanto contenuto in 
</span>    <span class="c1"># questo if viene eseguito
</span>    
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
    </code></pre></figure>

<p>&lt;/div&gt;La funzione main contiene il flusso principale del programma.</p>

<p>L’istruzione <strong>from</strong> dà indicazioni all’interprete di caricare la libreria che abbiamo appena definito. È buona norma metterla in alto, all’inizio del file. La sua sintassi è:</p>

<p><em>from nomercartella.nomefile import nomeclasse</em></p>

<p>Qualora la variabile di sistema __name__ corrisponda alla stringa __main__ si innesca la chiamata alla funzione main(). Questa riga consente al nostro codice di capire se sta venendo eseguito come script a se stante, o se è invece stato richiamato come modulo.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="c1"># file: grandezze/conversioni.py
</span>
<span class="k">class</span> <span class="nc">Conversioni</span><span class="p">:</span>
    
    <span class="k">def</span> <span class="nf">trasfCelsInFahr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Temp</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Temp</span><span class="o">*</span><span class="mi">9</span><span class="o">/</span><span class="mi">5</span><span class="o">+</span><span class="mi">32</span>
        
    <span class="k">def</span> <span class="nf">trasfFahrInCels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Temp</span><span class="p">):</span>
        <span class="k">pass</span>

<span class="c1"># se lo script viene mandato in 
# esecuzione quanto contenuto in 
# questo if viene eseguito
</span><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">conv</span> <span class="o">=</span> <span class="n">Conversioni</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">conv</span><span class="p">.</span><span class="n">trasfCelsInFahr</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mf">32.0</span><span class="p">,</span> <span class="s">"Err. per 0"</span> 
    <span class="k">assert</span> <span class="n">conv</span><span class="p">.</span><span class="n">trasfCelsInFahr</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="o">==</span> <span class="mf">68.0</span><span class="p">,</span> <span class="s">"Err. per 20"</span> 
    <span class="k">assert</span> <span class="n">conv</span><span class="p">.</span><span class="n">trasfCelsInFahr</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="o">==</span> <span class="mf">86.0</span><span class="p">,</span> <span class="s">"Err. per 30"</span> 
    <span class="k">print</span><span class="p">(</span><span class="s">"Tutto ok!"</span><span class="p">)</span>
    </code></pre></figure>

<p>&lt;/div&gt;In seguito troviamo un file di libreria in cui abbiamo precedentemente scritto l’implementazione delle funzioni che mi occorrono per fare conversioni tra grandezze. Questo file è contenuto nella cartella grandezze e si chiama conversioni.py. Questo file contiene due funzioni la prima trasforma i gradi Celsius in Fahrenheit, la seconda fa il contrario trasforma i gradi Fahrenheit in gradi Celsius. Notare che nella parte finale dentro l’if ci sono i test che si occupano di assicurarci la buona qualità della libreria. Se mando in run il file conversioni.py e visualizzo la scritta “tutto ok” vuol dire che la libreria funziona come ci si aspetta.</p>

<p>L’esempio che abbiamo appena visto ci dà idea su come gestire il codice in moduli che posso riutilizzare su molte applicazioni.</p>

<h3 id="esercizi">Esercizi</h3>

<p><strong>Esercizio 1:</strong> Completa la struttura descritta all’interno del capitolo aggiungendo altre 5 classi di persone che ruotano nell’ambito del mondo della scuola.</p>

<p><strong>Esercizio 2:</strong> Crea la struttura di classi necessaria per descrivere gli animali all’interno di uno zoo. Parti dalla classe base Animali e poi definisci le sottoclassi Mammiferi Rettili Uccelli e poi continua creando una classe per ciascun tipo di Animale: Orso, Vipera ecc. fino a 10 animali. Le classi avranno un attributo di classe per il nome scientifico, un attributo di istanza per il nome de singolo e avranno un metodo per presentarsi ed un per fare il verso (Bau bau, Miao, Zzzzz ecc.).</p>

<p><strong>Esercizio 3:</strong> Immagina di dover fare una applicazione per pagare gli stipendi in una azienda. Il direttore guadagna 100000 euro/anno, il vi- cedirettore 70000, una manager di medio livello 50000, gli impiegati 35000. Le ore di straordinario vengono retribuite il 20% più del normale. Chi fa il part-time guadagna il 60% del suo stipendio lordo. Crea la struttura di classi e i metodi per calcolare gli stipendi del personale in basso.</p>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/informaticainsieme/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Informatica insieme</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Informatica insieme</li><li><a class="u-email" href="mailto:burattino@gmail.com">burattino@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/fabiomattei"><svg class="svg-icon"><use xlink:href="/informaticainsieme/assets/minima-social-icons.svg#github"></use></svg> <span class="username">fabiomattei</span></a></li><li><a href="https://www.twitter.com/fabiomattei"><svg class="svg-icon"><use xlink:href="/informaticainsieme/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">fabiomattei</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>fare cosa gradita.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
