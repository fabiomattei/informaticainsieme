<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Il linguaggio SQL | Informatica insieme</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Il linguaggio SQL" />
<meta name="author" content="fabio" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Il linguaggio SQL permette al database administrator di operare sui database. Il linguaggio è di per se molto semplice e conta pochi comandi. Le possibili combinazioni di comandi danno però luogo ad una ricchissima potenzialità espressiva." />
<meta property="og:description" content="Il linguaggio SQL permette al database administrator di operare sui database. Il linguaggio è di per se molto semplice e conta pochi comandi. Le possibili combinazioni di comandi danno però luogo ad una ricchissima potenzialità espressiva." />
<link rel="canonical" href="http://localhost:4000/informaticainsieme/database/il-linguaggio-sql" />
<meta property="og:url" content="http://localhost:4000/informaticainsieme/database/il-linguaggio-sql" />
<meta property="og:site_name" content="Informatica insieme" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-02-10T06:22:07+01:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Il linguaggio SQL" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"fabio"},"dateModified":"2020-02-10T06:22:07+01:00","datePublished":"2020-02-10T06:22:07+01:00","description":"Il linguaggio SQL permette al database administrator di operare sui database. Il linguaggio è di per se molto semplice e conta pochi comandi. Le possibili combinazioni di comandi danno però luogo ad una ricchissima potenzialità espressiva.","headline":"Il linguaggio SQL","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/informaticainsieme/database/il-linguaggio-sql"},"url":"http://localhost:4000/informaticainsieme/database/il-linguaggio-sql"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/informaticainsieme/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/informaticainsieme/feed.xml" title="Informatica insieme" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/informaticainsieme/">Informatica insieme</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/informaticainsieme/about/">About me</a><a class="page-link" href="/informaticainsieme/paginemenu/codifica.html">La codifica dell&#39;informazione</a><a class="page-link" href="/informaticainsieme/paginemenu/python.html">Python</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Il linguaggio SQL</h1>
  </header>

  <div class="post-content">
    <p>Il linguaggio SQL permette al database administrator di operare sui database. Il linguaggio è di per se molto semplice e conta pochi comandi. Le possibili combinazioni di comandi danno però luogo ad una ricchissima potenzialità espressiva.</p>

<h4 id="create-table">CREATE TABLE</h4>

<p>Le <strong>entità</strong> e le <strong>relazioni</strong> si concretizzano in tabelle e campi contenute all’interno di un database. Il comando create table consente di creare una tabella in un database. Sintassi:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">nome_tabella</span> 
<span class="p">(</span><span class="o">&lt;</span><span class="n">nome_colonna</span><span class="o">&gt;&lt;</span><span class="n">tipo_dato</span><span class="o">&gt;</span><span class="p">[</span><span class="n">attributi</span><span class="p">],</span>
<span class="o">&lt;</span><span class="n">nome_colonna</span><span class="o">&gt;&lt;</span><span class="n">tipo_dato</span><span class="o">&gt;</span><span class="p">[</span><span class="n">attributi</span><span class="p">],...);</span></code></pre></figure>

<p>&lt;/div&gt;Gli attributi sono di inserimento facoltativo e i più frequentemente usati sono:</p>

<ul>
  <li>PRIMARY KEY, che rende il campo la chiave primaria della tabella (quella che occorre per instaurare relazioni con altre tabelle);</li>
  <li>NOT NULL, che rende il campo obbligatoriamente destinato a contenere un dato, contrariamente a quella che sarebbe l’impostazione di default;</li>
  <li>AUTOINCREMENT, destinato solo a campi contenenti un numero per fare in modo che il contenuto del campo si incrementi automaticamente di una unità a partire dal più grande valore già presente. Attributo molto utile per la primary key.</li>
</ul>

<p>Nel comando per creare una tabella abbiamo visto che occorre indicare, per ciascuna colonna destinata a scandire i campi dei record del nostro database, il tipo del dato che vi può essere inserito. In SQLite i tipi di dato gestiti sono solo cinque:</p>

<ul>
  <li>INTEGER: numero intero</li>
  <li>REAL: numero reale o a virgola mobile</li>
  <li>TEXT: testo</li>
  <li>BLOB: informazione in forma binaria (immagine contenuta in un file)</li>
  <li>NULL: rappresenta un dato mancante</li>
</ul>

<p>Esempio:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">alunni</span> <span class="p">(</span>
<span class="n">id</span> <span class="nb">INTEGER</span> <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="n">AUTOINCREMENT</span><span class="p">,</span>
<span class="n">nome</span> <span class="nb">TEXT</span><span class="p">,</span>
<span class="n">cognome</span> <span class="nb">TEXT</span><span class="p">);</span></code></pre></figure>

<h4 id="drop-table">DROP TABLE</h4>

<p>Il comando consente di cancellare una tabella dal database.</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">nome_tabella</span><span class="p">;</span></code></pre></figure>

<p>&lt;/div&gt;Esempio:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">alunni</span><span class="p">;</span></code></pre></figure>

<h4 id="insert">INSERT</h4>

<p>Il comando consente di inserire dati in una tabella esistente</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">nome_tabella</span>
<span class="p">(</span><span class="n">colonna1</span><span class="p">,</span> <span class="n">colonna2</span><span class="p">,</span> <span class="n">colonna3</span><span class="p">)</span> 
<span class="k">VALUES</span> <span class="p">(</span><span class="n">valore1</span><span class="p">,</span> <span class="n">valore2</span><span class="p">,</span> <span class="n">valore3</span><span class="p">);</span></code></pre></figure>

<p>&lt;/div&gt;Attenzione: i valori da inserire vanno elencati nello stesso ordine delle colonne. I valori numerici si inseriscono senza particolari accortezze, mentre i valori di tipo stringa vanno racchiusi tra semplici apici ’ oppure doppi apici “.</p>

<p>Esempio:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">alunni</span> 
<span class="p">(</span><span class="n">nome</span><span class="p">,</span> <span class="n">cognome</span><span class="p">)</span> 
<span class="k">VALUES</span> <span class="p">(</span><span class="nv">"Annalisa"</span><span class="p">,</span> <span class="nv">"De Pamphilis"</span><span class="p">);</span></code></pre></figure>

<p>&lt;/div&gt;A questo punto la tabella alunni conterrà una tupla avente id = 1, il campo nome conterrà la stringa “Annalisa” e il campo cognome conterrà la stringa “De Pamphilis”. Dato che l’id non è stato specificato all’interno del comando INSERT e che questo è stato inizializzato come autoincrement questo viene posto automaticamente a 1.</p>

<figure class="wp-block-table">| id | nome | cognome |
|---|---|---|
| 1 | Annalisa | De Pamphilis |

</figure>
<h4 id="update">UPDATE</h4>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">UPDATE</span> <span class="n">nome_tabella</span>
<span class="k">SET</span> <span class="n">colonna1</span><span class="o">=</span><span class="n">valore1</span><span class="p">,</span> <span class="n">colonna2</span><span class="o">=</span><span class="n">valore2</span><span class="p">,</span> <span class="p">...</span> 
<span class="k">WHERE</span> <span class="n">predicato</span><span class="p">;</span></code></pre></figure>

<p>&lt;/div&gt;I valori numerici si inseriscono senza particolari accortezze, mentre i valori di tipo stringa vanno racchiusi tra semplici apici ’ oppure doppi apici “.</p>

<p>Esempio:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">UPDATE</span> <span class="n">alunni</span> <span class="k">SET</span> <span class="n">nome</span> <span class="o">=</span> <span class="nv">"Annabella"</span> <span class="k">WHERE</span> <span class="n">id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span></code></pre></figure>

<h4 id="delete">DELETE</h4>

<p>Il comando consente di cancellare i dati da una tabella</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">nome_tabella</span> <span class="k">WHERE</span> <span class="n">predicato</span><span class="p">;</span></code></pre></figure>

<p>&lt;/div&gt;I valori numerici si inseriscono senza particolari accortezze, mentre i valori di tipo stringa vanno racchiusi tra semplici apici ’ oppure doppi apici “.</p>

<p>Esempio:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">alunni</span> <span class="k">WHERE</span> <span class="n">id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span></code></pre></figure>

<h4 id="select">SELECT</h4>

<p>Il comando consente di andare a leggere i dati dalle tabelle del database</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="n">colonna1</span><span class="p">,</span> <span class="n">colonna2</span><span class="p">,</span> <span class="p">...</span> 
<span class="k">FROM</span> <span class="n">nome_tabella</span>
<span class="k">WHERE</span> <span class="n">predicato</span><span class="p">;</span></code></pre></figure>

<p>&lt;/div&gt;Questo comando permette di reperire dati da una o più tabelle.</p>

<ul>
  <li>dopo SELECT va inserito, attraverso il nome di colonna, l’elenco dei campi richiesti dalla ricerca (in gergo la query), separati da virgola e nell’ordine in cui si vogliono ricevere; in caso di ambiguità (due campi con lo stesso nome) il campo va indicato non semplicemente come nome_colonna ma nella forma più completa tabella.nome_colonna;</li>
  <li>dopo FROM va inserito l’elenco delle tabelle coinvolte nella ricerca. Possono essere coinvolte perché contengono campi con i contenuti che cerchiamo o perché partecipano nei predicati che ci consentono di filtrare i dati;</li>
  <li>dopo WHERE, separate eventualmente da AND o da OR, si indicano i predicati che utilizziamo per selezionare tra i dati contenuti nelle tabelle soltanto quelli che ci occorrono. Anche in questo caso, in caso di ambiguità (due campi con lo stesso nome) il campo va indicato non semplicemente come nome_colonna ma nella forma più completa tabella.nome_colonna;</li>
</ul>

<p>I predicati possono essere:</p>

<ul>
  <li>di confronto: =, &lt;&gt;, &lt;=, &gt;=, &lt;, &gt;</li>
  <li>pattern matching (confronto di schema) tra stringhe: LIKE seguita da caratteri jolly _ per un solo carattere, % per uno o più caratteri.</li>
</ul>

<p>I predicati si combinano tra loro utilizzando gli operatori logici AND, OR, NOT.</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="n">Esempio</span> <span class="n">di</span> <span class="n">uso</span> <span class="n">di</span> <span class="k">AND</span> 
<span class="k">SELECT</span> <span class="n">colonna1</span><span class="p">,</span> <span class="n">colonna2</span><span class="p">,</span> <span class="p">...</span>
<span class="k">FROM</span> <span class="n">nome_tabella</span>
<span class="k">WHERE</span> <span class="n">predicato1</span> <span class="k">AND</span> <span class="n">predicato2</span> <span class="k">AND</span> <span class="n">predicato3</span> <span class="p">...;</span> 

<span class="n">Esempio</span> <span class="n">di</span> <span class="n">uso</span> <span class="n">di</span> <span class="k">OR</span>

<span class="k">SELECT</span> <span class="n">colonna1</span><span class="p">,</span> <span class="n">colonna2</span><span class="p">,</span> <span class="p">...</span>
<span class="k">FROM</span> <span class="n">nome_tabella</span>
<span class="k">WHERE</span> <span class="n">predicato1</span> <span class="k">OR</span> <span class="n">predicato2</span> <span class="k">OR</span> <span class="n">predicato3</span> <span class="p">...;</span> 

<span class="n">Esempio</span> <span class="n">di</span> <span class="n">uso</span> <span class="n">di</span> <span class="k">NOT</span>
<span class="k">SELECT</span> <span class="n">colonna1</span><span class="p">,</span> <span class="n">colonna2</span><span class="p">,</span> <span class="p">...</span>
<span class="k">FROM</span> <span class="n">nome_tabella</span>
<span class="k">WHERE</span> <span class="k">NOT</span> <span class="n">predicato</span><span class="p">;</span></code></pre></figure>

<h4 id="listruzione-join-in-sql">L’istruzione JOIN in SQL</h4>

<p>L’istruzione JOIN ha lo scopo di combinare tuple tra due o più tabelle, basandosi su una colonna che collega logicamente le tabelle stesse.</p>

<p>Vediamo un esempio:</p>

<p><strong>Tabella Clienti</strong></p>

<figure class="wp-block-table">| IdCliente | NomeCliente | NomeContatto | Nazione |
|---|---|---|---|
| 1 | Carlo Pedersoli | Maria Anders | Germania |
| 2 | Mario Girotti | Elvira Bianchi | Italia |
| 3 | Sergio Leone | Antonio Moreno Taquería | Messico |

</figure>
<p><strong>Tabella Ordini</strong></p>

<figure class="wp-block-table">| IdOrdine | IdCliente | DataOrdine |
|---|---|---|
| 10308 | 2 | 12/04/2019 |
| 10309 | 1 | 13/04/2019 |
| 10310 | 3 | 18/04/2019 |

</figure>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"> <span class="k">SELECT</span> <span class="n">Ordini</span><span class="p">.</span><span class="n">IdOrdine</span><span class="p">,</span> <span class="n">Clienti</span><span class="p">.</span><span class="n">NomeCliente</span><span class="p">,</span> <span class="n">Ordini</span><span class="p">.</span><span class="n">DataOrdine</span> 
<span class="k">FROM</span> <span class="n">Ordini</span>
<span class="k">JOIN</span> <span class="n">Clienti</span> <span class="k">ON</span> <span class="n">Ordini</span><span class="p">.</span><span class="n">IdCliente</span><span class="o">=</span><span class="n">Clienti</span><span class="p">.</span><span class="n">IdCliente</span><span class="p">;</span></code></pre></figure>

<p>&lt;/div&gt;<figure class="wp-block-table">| IdOrdine | NomeCliente | DataOrdine |
|—|—|—|
| 10308 | Mario Girotti | 12/04/2019 |
| 10309 | Carlo Pedersoli | 13/04/2019 |
| 10310 | Sergio Leone | 18/04/2019 |</figure></p>

<p>&lt;/figure&gt;Il risultato dell’istruzione è quello di collegare tra loro le tuple corrispondenti e visualizzare insieme i dati provenienti da una o più tabelle.</p>

<h3 id="esercizi">Esercizi</h3>

<p><strong>Esercizio 1:</strong></p>

<p>Schema relazionale:</p>

<p>ATTORI (IdAttore, Nome, AnnoNascita, Nazionalità);<br />
RECITA (IdAttore*, IdFilm*)<br />
FILM (IdFilm, Titolo, AnnoProduzione, Nazionalità, Regista, Genere) <br />
PROIEZIONI (IdProiezione, IdFilm*, IdSala*, Incasso, DataProiezione) <br />
SALE (IdSala, Posti, Nome, Città)</p>

<p>Scrivi le sequenti query SQL:</p>

<ul>
  <li>Inserisci nella tabella attori: “Terence Hill”, 1939, “Italiana”; “Margot Robbie”, 1990, “Australiana”</li>
  <li>Inserisci il film: “Lo chiamavano Trinità”, 1970, “Italiana”, “Enzo Barboni”</li>
  <li>Inserisci la relazione tra Terence Hill e Lo chiamavano Trinità</li>
  <li>Inserici le sale: 120, “Cinema Italia”, “Castel di Sangro”; 90, “Igioland”, “Corfinio”</li>
  <li>Inserisci la proiezione del film “Lo chiamavano Trinità” di ieri a Castel di Sangro, incasso 1000€ del 05/02/2020</li>
</ul>

<p><strong>Esercizio 2</strong></p>

<p>Basandoti sul relazionale dell’esercizio uno, scrivi le seguenti query SQL:</p>

<ul>
  <li>Correggi la proiezione di ieri fatta a Castel di Sangro: l’incasso è stato di 1200€ e non di 1000€</li>
  <li>Correggi la capienza della sala del cinema di Corfinio: può contenere 96 persone e non 90</li>
  <li>Inserisci il film “Birds of Prey”, 2020, “USA”, “Cathy Yan” in cui recita Margot Robbie</li>
  <li>Inserisci la relazione tra Margot Robbie e Birds of Prey</li>
  <li>Visualizza con una SELECT tutti gli attori presenti nel database</li>
</ul>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/informaticainsieme/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Informatica insieme</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Informatica insieme</li><li><a class="u-email" href="mailto:burattino@gmail.com">burattino@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/fabiomattei"><svg class="svg-icon"><use xlink:href="/informaticainsieme/assets/minima-social-icons.svg#github"></use></svg> <span class="username">fabiomattei</span></a></li><li><a href="https://www.twitter.com/fabiomattei"><svg class="svg-icon"><use xlink:href="/informaticainsieme/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">fabiomattei</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>fare cosa gradita.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
